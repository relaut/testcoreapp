def pwd1 = "${env.BUILD_NUMBER}"
echo "Pwd is ${pwd1}"
 environment {
        pwd = "${pwd1}"
    }
node('jenkins-slave') { //jenkins slave is the pod label from the Kubernetes plugin config
		echo 'Test'
       withEnv(['Docker_Password=${pwd1}', 'MyVar=Test']){
	     echo "MyVar is ${env.BUILD_NUMBER}"
		def password = Docker_Password
	    echo "Password is ${pwd}"
	    echo "Docker Password is ${Docker_Password}"
   		def scmUrl = scm.getUserRemoteConfigs()[0].getUrl()
		echo "ScmUrl = ${scmUrl}"
		def projectName = "${scmUrl}".replaceAll('https://github.com/', '').replaceAll('.git', '')
		echo "ProjectName = ${projectName}"
		def imageTag = "${projectName}:${env.BUILD_NUMBER}".toLowerCase()
		echo "Image tag is ${imageTag}"
		container('jnlp-docker') {
			sh 'printenv'
			def uname = "${EnvVars.DOCKER_USERNAME}"
			echo "Uname is ${uname}"
		}
	}
}
